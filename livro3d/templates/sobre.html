{% extends 'base.html' %}
{% load static %}
{% block title %}Sobre{% endblock %}

{% block content %}
<!-- Seção de apresentação -->
<div class="fade-in rounded-bottom-5 d-flex py-5 {% if not identidade_visual.cor_principal %}bg-dark{% endif %}" {% if identidade_visual.cor_principal %} style="background-color: {{ identidade_visual.cor_principal }} {% endif %}">
    <div class="container row mx-auto">
        <div class="gradient py-5 text-center">
            <div class="container text-white">
                <img src="{% static 'imgs/whitestar.svg' %}" alt="White Star" height="50" />
                <h1 class="my-4 display-4 fw-bold mb-4">Sobre nós</h1>
                {% if sobre.frase_inicio %}
                <p class="lead mb-4">{{ sobre.frase_inicio }}</p>
                {% else %}
                <p class="lead mb-4">Frase início</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<section id="servicos" class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold mb-3">Objetivos</h2>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="bg-white rounded-4 p-4"
                    style="height: 100%; transition: transform 0.3s ease; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
                    <div class="text-white rounded-circle d-flex align-items-center justify-content-center mb-2 mx-auto {% if not identidade_visual.cor_principal %}bg-dark{% endif %}" 
                         style="width: 70px; height: 70px; background-color: {% if identidade_visual.cor_principal %}{{ identidade_visual.cor_principal }}{% else %}#000000{% endif %};">
                        <h3 class="m-0">1</h3>
                    </div>
                    <p class="text-center">{% if sobre.objetivo_1 %}{{ sobre.objetivo_1 }}{% else %}Adicione um objetivo.{% endif %}</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="bg-white rounded-4 p-4"
                    style="height: 100%; transition: transform 0.3s ease; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
                    <div class="text-white rounded-circle d-flex align-items-center justify-content-center mb-2 mx-auto {% if not identidade_visual.cor_principal %}bg-dark{% endif %}" 
                         style="width: 70px; height: 70px; background-color: {% if identidade_visual.cor_principal %}{{ identidade_visual.cor_principal }}{% else %}#000000{% endif %};">
                        <h3 class="m-0">2</h3>
                    </div>
                    <p class="text-center">{% if sobre.objetivo_2 %}{{ sobre.objetivo_2 }}{% else %}Adicione o segundo objetivo.{% endif %}</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="bg-white rounded-4 p-4"
                    style="height: 100%; transition: transform 0.3s ease; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
                    <div class="text-white rounded-circle d-flex align-items-center justify-content-center mb-2 mx-auto {% if not identidade_visual.cor_principal %}bg-dark{% endif %}" 
                         style="width: 70px; height: 70px; background-color: {% if identidade_visual.cor_principal %}{{ identidade_visual.cor_principal }}{% else %}#000000{% endif %};">
                        <h3 class="m-0">3</h3>
                    </div>
                    <p class="text-center">{% if sobre.objetivo_3 %}{{ sobre.objetivo_3 }}{% else %}Adicione um terceiro objetivo.{% endif %}</p>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="text-white rounded-5 py-5 my-5 {% if not identidade_visual.cor_principal %}bg-dark{% endif %}" {% if identidade_visual.cor_principal %} style="background-color: {{ identidade_visual.cor_principal }} {% endif %}">
  <div class="container text-center">
    {% if sobre.sessao_foto %}
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-6">
            <h2 class="display-4 fw-bold mb-4">{{ sobre.sessao_titulo }}</h2>
            <p class="text-left mb-4">{{ sobre.sessao_texto }}</p>
          </div>
          <div class="col-lg-6 text-center d-flex">
            <img src="{{ sobre.sessao_foto.url }}" alt="Sustentabilidade" class="h-100 rounded shadow ms-auto" />
          </div>
        </div>
      </div>
    {% else %}
      {% if sobre.sessao_titulo %}
          <h2 class="fw-bold mb-4">{{ sobre.sessao_titulo }}</h2>
        {% else %}
          <h2 class="fw-bold mb-4">Título da sessão</h2>
        {% endif %}
        {% if sobre.sessao_texto %}
          <p class="lead mb-4">{{ sobre.sessao_texto }}</p>
        {% else %}
          <p class="lead mb-4">Conteúdo da sessão</p>
      {% endif %}
    {% endif %}
  </div>
</div>

<h1 class="text-center">Membros</h1>
{% if membros.exists %}
<div id="membrosCarousel" class="carousel slide w-75 mx-auto my-4" data-bs-ride="carousel">
    <div class="carousel-inner">
        {% for membro in membros.all %}
            {% if forloop.counter0|divisibleby:4 or forloop.first %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    <div class="row justify-content-center">
            {% endif %}
                        <div class="col-md-3 col-sm-6">
                            <div class="text-center">
                                {% if membro.foto %}
                                <img src="{{ membro.foto.url }}" 
                                     class="rounded-circle w-50 object-fit-cover" 
                                     alt="{{ membro.nome }}" style="aspect-ratio: 1/1;">
                                     {% else %}
                                     <img src="{% static 'imgs/perfil.png' %}" 
                                          class="rounded-circle w-50" 
                                          alt="{{ membro.nome }}">
                                {% endif %}
                                <h5 class="verdeTexto mt-2 fw-bold">{{ membro.nome }}</h5>
                                <p class="verdinho fw-bold">{{ membro.cargo }}</p>
                            </div>
                        </div>
            
            {% if forloop.counter|divisibleby:4 or forloop.last %}
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
    
    <!-- Controles -->
    <button class="carousel-control-prev" type="button" data-bs-target="#membrosCarousel" data-bs-slide="prev">
    <i class="bi bi-arrow-left-circle-fill text-dark fs-2" aria-hidden="true"></i>
        <span class="visually-hidden">Anterior</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#membrosCarousel" data-bs-slide="next">
        <i class="bi bi-arrow-right-circle-fill text-dark fs-2" aria-hidden="true" style="font-size: 2.8;"></i>
        <span class="visually-hidden">Próximo</span>
    </button>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% else %}
<p class="text-dark text-center">Nenhum membro adicionando.</p>
{% endif %}

{% endblock %}