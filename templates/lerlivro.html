{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'styles2.css' %}" />
    <title>{{ livro.titulo }}</title>
</head>

<body>
    <div id="rotate-notice">
        <div style="display: flex; flex-direction: column; align-items: center; text-align: center;">
            <img src="{% static 'imgs/turn.gif' %}" alt="" height="100" width="100" />
            <p>Vire seu celular para a horizontal para visualizar o livro melhor!</p>
        </div>
    </div>

    <div class="flipbook">
        <div class="hard"><img src="{{ pagina.capaFrente.url }}" alt=""></div>
        <div class="hard"></div>
        {% for pagina in paginas %}
            <div><img src="{{ pagina.pagina.url }}" alt="Página {{ pagina.numero_pagina }}" /></div>
        {% endfor %}

        <div class="hard"><img src="{{ pagina.capaCostas.url }}" alt="" /></div>

        <div class="hard"></div>
    </div>

    <script src="{% static 'jquery.js' %}"></script>
    <script src="{% static 'turn.js' %}"></script>
    <script>
        function isMobile() {
            return window.innerWidth <= 1024; 
        }
    
        function resizeFlipbook() {
            if (isMobile()) {
                const screenWidth = window.innerWidth;
                const screenHeight = window.innerHeight;
    
                let bookWidth = screenWidth * 0.95;
                let bookHeight = bookWidth * 0.6;
    
                if (bookHeight > screenHeight * 0.9) {
                    bookHeight = screenHeight * 0.9;
                    bookWidth = bookHeight / 0.6;
                }
    
                $(".flipbook").turn("size", bookWidth, bookHeight);
                $(".flipbook").css({
                    width: bookWidth + "px",
                    height: bookHeight + "px"
                });
            } else {
                // Tamanho padrão para desktop
                $(".flipbook").turn("size", 1000, 600);
                $(".flipbook").css({
                    width: "1000px",
                    height: "600px"
                });
            }
        }
    
        $(document).ready(function () {
            $(".flipbook").turn({
                width: 1000,
                height: 600,
                autoCenter: true,
                elevation: 50,
                gradients: true
            });
    
            resizeFlipbook();
    
            $(window).on("resize orientationchange", function () {
                resizeFlipbook();
            });
        });
    </script>
</body>

</html>